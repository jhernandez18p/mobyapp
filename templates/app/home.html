{% extends 'app/base/index.html' %}{% load staticfiles %}
<!-- <link rel="stylesheet" href="{% static 'base/css/home.css' %}"> -->

{% block css %}
{% endblock %}

{% block full_screen %}
{% endblock %}

{% block content %}
{% if home_header_carousel %}
<div class="container is-margin-botton-50">
    <div class="columns">
        <div class="column is-8 is-offset-2">
            <div class="carousel" id="homeCarrousel">
                {% for object in home_header_carousel_images %}
                <div class=''>
                    <img class="is-background" src="{{ object.image.url }}" alt="{{object.name}}"></img>
                    <div class="title">{{object.name}}</div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endif %}

{% if services %}
<div class="container-fluid">    
    <div class="container">
        <div class="columns">
            <div class="column is-4 is-offset-2">
                <div id="whatWeDo">
                    <div class="">
                        <h3 class="is-size-2">Servicios</h3>
                        <h3 class="is-size-3">Soluciones al alcance de sus manos. <br> ¡Moby Supply!</h3>
                    </div>
                    {% for object in services %}
                        {% if object.featured %}
                        <div>
                            <a href="{{object.get_absolute_url}}" class="has-text-black">
                                <h3 class="is-size-3">{{object.title}}</h3>
                            </a>
                            <hr class="rgba-green-strong is-green-line"></hr>
                            <div>
                                {% if object.description != '' %}
                                    {{ object.description | safe }}
                                {% elif object.content != '' %}
                                    {{ object.content | safe }}
                                {% else %}
                                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quos maiores quidem accusamus quia! Delectus, eligendi minus dicta ipsam facere explicabo libero recusandae fugiat pariatur. Quibusdam, quis amet! Dolore, placeat modi!
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <div class="column is-4">
                <div class="carousel" id="serviceCarrousel">
                    {% for object in service_header_carousel_images %}
                    <div class=''>
                        <img class="is-background" src="{{ object.image.url }}" alt="{{object.name}}"></img>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{% if info_site %}
<div>
    <div class="container">
        <div class="columns" id="about">
            <div class="column is-8 is-offset-2">
                <div class="card">
                    <div class="card-content">
                        <p class="title">{{ info_site.name | safe}}</p>
                        <div class="subtitle">{{ info_site.short_description | safe }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="container" id="services">
            <div class="columns">
                <div class="column is-4 is-offset-2">
                    <div class="card is-centered overlayer">
                        <div class="content-overlay"></div>
                        <img class="content-image" alt="Servicios de moby" src="{{ info_site.services_img.url }}"></img>
                        <div class="content-details fadeIn-top">
                            <Link to="/servicios">
                            <h3>Conozca nuestros servicios</h3>
                            </Link>
                        </div>
                    </div>
                </div>
                <div class="column is-4">
                    <div class="card is-centered overlayer">
                        <div class="content-overlay"></div>
                        <img class="content-image" alt="Productos de moby" src="{{ info_site.products_img.url }}"></img>
                        <div class="content-details fadeIn-top">
                            <Link to="/productos">
                            <h3>Conozca nuestros Productos</h3>
                            </Link>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

{% if departments %}
<div class="container-fluid">
    <div class="container" id="categories">
        <div class="is-centered">
            <h3 class="is-size-2">Principales categorías de productos</h3>
        </div>
        <div>
            <div class="columns is-home-categories">
            {% for object in departments %}
                {% if forloop.counter0 == 0 %}
                <div class="column is-4 is-offset-2">
                    <div class="card is-centered overlayer">
                        <div class="content-overlay"></div>
                        <img {% if object.background.url %} src="{{object.background.url}}" {% elif object.img.url %} src="{{object.img.url}}" {% else %} src="/static/base/img/img-base-m.png" {% endif %} alt="{{object.title}}" class="content-image"></img>
                        <div class="content-details fadeIn-top">
                            <a href="/productos/todos?departamento={{object.id}}">
                                <h3>{{object.name}}</h3>
                            </a>
                        </div>
                    </div>
                </div>
                {% elif forloop.counter0 == 2 %}
                </div>
                    <div class="columns is-home-categories">
                        <div class="column is-4 is-offset-2">
                                <div class="card is-centered overlayer">
                                    <div class="content-overlay"></div>
                                    <img {% if object.background.url %} src="{{object.background.url}}" {% elif object.img.url %} src="{{object.img.url}}" {% else %} src="/static/base/img/img-base-m.png" {% endif %} alt="{{object.title}}" class="content-image"></img>
                                    <div class="content-details fadeIn-top">
                                        <a href="/productos/todos?departamento={{object.id}}">
                                            <h3>{{object.name}}</h3>
                                        </a>
                                    </div>
                                </div>
                            </div>
                {% else %}
                <div class="column is-4">
                    <div class="card is-centered overlayer">
                        <div class="content-overlay"></div>
                        <img {% if object.background.url %} src="{{object.background.url}}" {% elif object.img.url %} src="{{object.img.url}}" {% else %} src="/static/base/img/img-base-m.png" {% endif %} alt="{{object.title}}" class="content-image"></img>
                        <div class="content-details fadeIn-top">
                            <a href="/productos/todos?departamento={{object.id}}">
                                <h3>{{object.name}}</h3>
                            </a>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endif %}

{% if blog_posts %}
<div>
    <div class="container" id="blog">
        <div class="is-centered">
            <h3 class="is-size-2">Moby tips y blog</h3>
        </div>
    </div>
    <div class="container is-margin-botton-50 is-padding-y-30" id="feeds">
        <div class="columns is-padding-y-30" id="blogPostCarrousel">
            {% for object in blog_posts %}
            <div class="column">
                <div class="recent-feed">
                    <div class="feed-img">
                        <a href="{% url 'blog:blog_detail' object.slug %}">
                            {% if object.img.url != None %}
                            <img class="mb-4 img-fluid" src="{{object.img.url}}" alt="{{object.title}}">
                            {% else %}
                            <img class="mb-4 img-fluid" src="/static/base/img/img-base-m.png" alt="{{object.title}}">
                            {% endif %}
                        </a>
                    </div>
                    <div class="feed-title">
                        <h3 class="is-size-6">
                            <a href="{% url 'blog:blog_detail' object.slug %}" class="has-text-black">
                                {{object.title}}
                            </a>
                        </h3>
                    </div>
                    <div class="feed-leyend is-clearfix">
                        <p class="is-size-7 is-pulled-left">
                            <span class="icon">
                                <i class="fas fa-folder-open"></i>
                            </span>
                            <a href="{% url 'blog:blog_detail' object.slug %}" class="has-text-black">
                                {{object.tag}}
                            </a>
                        </p>
                        <p class="is-size-7 is-pulled-right">
                            <span class="icon">
                                <i class="fa fa-clock"></i>
                            </span>
                            {{object.published}}
                        </p>
                    </div>
                    <div class="feed-content">
                        <div>{{object.text|truncatewords:8|safe }}</div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

{% endblock %}

{% block js %}
<script src="{% static 'base/js/slick.min.js' %}"></script>
<script>
    $('#homeCarrousel').slick({
        dots: false,
        infinite: true,
        speed: 300,
        fade: true,
        cssEase: 'linear',
        autoplay: true,
        autoplaySpeed: 2000
    });
    $('#serviceCarrousel').slick({
        dots: true,
        infinite: true,
        speed: 300,
        fade: true,
        cssEase: 'linear',
        autoplay: true,
        autoplaySpeed: 2000
    });
    $('#blogPostCarrousel').slick({
        dots: true,
        infinite: true,
        speed: 300,
        slidesToShow: 4,
        slidesToScroll: 1,
        responsive: [
            {
                breakpoint: 1024,
                settings: {
                    slidesToShow: 4,
                    slidesToScroll: 1,
                    infinite: true,
                    dots: true
                }
            },
            {
                breakpoint: 600,
                settings: {
                    slidesToShow: 2,
                    slidesToScroll: 2
                }
            },
            {
                breakpoint: 480,
                settings: {
                    slidesToShow: 1,
                    slidesToScroll: 1
                }
            }
        ],
        autoplay: true,
        autoplaySpeed: 2000
    });
</script>
{% endblock %}